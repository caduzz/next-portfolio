/* eslint-disable @next/next/no-img-element */
import Head from 'next/head'
import { Swiper, SwiperSlide } from 'swiper/react';

import { SiGmail, SiGithub, SiLinkedin } from 'react-icons/si'

import 'swiper/css';

import GitCard from '../components/GitCard';
import QualificationCard from '../components/QualificationCard';

import styles from '../styles/Home.module.css'
import Terminal from '../components/Terminal';

export default function Home({ userInfos, repoInfos, languages }) {
  return (
    <div className={styles.container}>
      <Head>
        <title>Home</title>
        <meta name="description" content="Generated by create next app" />
      </Head>
      <main className={styles.main}>
        <nav className={styles.navbar}>
          <div className={styles.navbararea}>
            <div className={styles.navitems}>
              <a href='#' className={styles.naviten}>Home</a>
              <a href='#' className={styles.naviten}>About</a>
              <a href='#' className={styles.naviten}>Projects</a>
              <a href='#' className={styles.naviten}>Articles</a>
            </div>
            <div className={styles.navcontateme}>
              <a href='#' className={styles.naviten} hrefLang='https://twitter.com/cadu__s' >
                <SiGmail color='#ffffff' size={22}/>
              </a>
              <a href='#' className={styles.naviten} hrefLang='https://www.linkedin.com/in/cadu-dev/'>
                <SiLinkedin color='#ffffff' size={22}/>
              </a>
              <a href='#' className={styles.naviten} hrefLang='https://github.com/caduzz'>
                <SiGithub color='#ffffff' size={22}/>
              </a>
            </div>
          </div>
        </nav>
        <section id={styles.inicio}>
          <div className={styles.inicioarea}>
            <div className={styles.inicioinfoarea}>
              <div className={styles.myinfos}>
                <h1 className={styles.userName}>{userInfos.name}</h1>
                <p className={styles.serviceName}>{userInfos.service}</p>
                <p className={styles.serviceDecription}></p>
              </div>
              <div className={styles.socialarea}>
              </div>
            </div>
            <div className={styles.inicioinfoarea}>
              <Terminal repos={repoInfos} />
            </div>
          </div>
        </section>

        <section id={styles.sobre}>
          <div className={styles.qualiHeader}>
            <h1>Habilidades</h1>
          </div>
          <Swiper
            spaceBetween={50}
            slidesPerView={4}
            navigation={true}
            pagination={{ clickable: true }}
            scrollbar={{ draggable: true }}
            className={styles.gitAreaSwiper}
            breakpoints={{
              450: {
                slidesPerView: 1,
              },
              620: {
                slidesPerView: 2,
              },
              750: {
                slidesPerView: 4,
              },
            }}
          >
            {languages.map((item, key) => (
              <SwiperSlide key={key}>
                <QualificationCard data={item} />
              </SwiperSlide>
            ))}
          </Swiper>
        </section>

        <section id={styles.progetos}>
          <div className={styles.gitArea}>
            {repoInfos.map((item, key) => <GitCard key={key} data={item} />)}
          </div>
        </section>
      </main>
    </div>
  )
}

export const getServerSideProps = async () => {
  const urlI = process.env.APICONECTION_URI;

  const data = await fetch(`${urlI}/api/portfolio`);
  const dataInfo = await data.json();

  return {
    props: {
      userInfos: dataInfo.userInfos,
      repoInfos: dataInfo.repoInfos,
      languages: dataInfo.languages
    }
  }
}